{"ast":null,"code":"var _jsxFileName = \"/Users/shayanbozorgmanesh/Documents/Parking/coinlink-mvp/frontend/src/components/Chat.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { bitcoinAPI, systemAPI } from '../services/api';\nimport { alerts$, connectRealtime } from '../services/realtime';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chat = ({\n  isConnected\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionId, setSessionId] = useState('default'); // Add this line\n  const [isPasswordStep, setIsPasswordStep] = useState(false); // Add this line\n  const messagesEndRef = useRef(null);\n  const [hasNewAlert, setHasNewAlert] = useState(false);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n    try {\n      console.log('Chat messages updated:', messages);\n    } catch {}\n  }, [messages]);\n\n  // Add welcome message on component mount\n  useEffect(() => {\n    setMessages([{\n      id: 'welcome',\n      type: 'bot',\n      content: 'Welcome to CoinLink Bitcoin Analysis! Ask me anything about Bitcoin (BTC) - price analysis, market sentiment, technical indicators, or trading insights. I focus exclusively on Bitcoin analysis. Type /register to create your free account.',\n      timestamp: new Date().toISOString(),\n      sessionId: sessionId // Add this line\n    }]);\n  }, []);\n\n  // Subscribe to agent-initiated alert messages (inline chat)\n  useEffect(() => {\n    connectRealtime();\n    const sub = alerts$.subscribe(alert => {\n      try {\n        // Expect only agent chat payloads now\n        if (alert && (alert.text || alert.title)) {\n          const now = new Date();\n          const time = now.toLocaleTimeString([], {\n            hour: 'numeric',\n            minute: '2-digit'\n          });\n          let text = alert.text || '';\n          if (text) {\n            setMessages(prev => [...prev, {\n              id: Date.now() + Math.random(),\n              type: 'agent',\n              content: text,\n              timestamp: new Date().toISOString(),\n              sessionId: sessionId // Add this line\n            }]);\n            setHasNewAlert(true);\n            setTimeout(() => setHasNewAlert(false), 4000);\n            // Scroll will auto-run via messages effect\n          }\n        }\n      } catch {}\n    });\n    return () => sub.unsubscribe();\n  }, []);\n  const sendMessage = async (message = null) => {\n    try {\n      const messageToSend = message || inputMessage;\n      console.log('sendMessage called with:', messageToSend);\n      console.log('isConnected:', isConnected);\n      console.log('inputMessage:', inputMessage);\n      if (!messageToSend || !messageToSend.trim()) {\n        console.log('Message is empty, returning');\n        return;\n      }\n\n      // Remove the isConnected check to allow chat to work without WebSocket\n      // if (!isConnected) {\n      //   console.log('Not connected, returning');\n      //   return;\n      // }\n\n      const isPasswordField = messages.some(m => m.type === 'system' && m.content.toLowerCase().includes('password'));\n      const userMessage = {\n        id: Date.now(),\n        type: 'user',\n        content: isPasswordField ? '••••••••' : messageToSend,\n        // Mask password display\n        timestamp: new Date().toISOString(),\n        sessionId: sessionId // Add this line\n      };\n      console.log('Adding user message:', userMessage);\n      setMessages(prev => [...prev, userMessage]);\n      if (!message) setInputMessage('');\n      setIsLoading(true);\n      try {\n        console.log('Calling bitcoinAPI.chat with:', messageToSend);\n        const response = await bitcoinAPI.chat(messageToSend, sessionId);\n        console.log('Chat API response:', response);\n        if (response && response.type === 'registration') {\n          setIsPasswordStep(response.system_message.content.toLowerCase().includes('password'));\n          // Handle registration flow\n          const systemMessage = {\n            id: Date.now() + 1,\n            type: 'system',\n            content: response.system_message.content,\n            timestamp: new Date().toISOString(),\n            sessionId: sessionId // Add this line\n          };\n          setMessages(prev => [...prev, systemMessage]);\n        } else if (response && response.type === 'chat' && response.bot_response) {\n          // Handle normal chat\n          setIsPasswordStep(false);\n          const botMessage = {\n            id: Date.now() + 1,\n            type: 'bot',\n            content: response.bot_response,\n            timestamp: new Date().toISOString(),\n            sessionId: sessionId // Add this line\n          };\n          console.log('Adding bot message:', botMessage);\n          setMessages(prev => [...prev, botMessage]);\n        } else {\n          throw new Error('Invalid response format from chat API');\n        }\n      } catch (error) {\n        var _error$response, _error$response$data;\n        console.error('Error sending message:', error);\n        const detail = error && (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || error.message) || 'Unknown error';\n        const errorMessage = {\n          id: Date.now() + 1,\n          type: 'bot',\n          content: `Error: ${detail}`,\n          timestamp: new Date().toISOString(),\n          sessionId: sessionId // Add this line\n        };\n        setMessages(prev => [...prev, errorMessage]);\n      } finally {\n        setIsLoading(false);\n      }\n    } catch (error) {\n      console.error('Unexpected error in sendMessage:', error);\n      setIsLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n  const [quickQuestions, setQuickQuestions] = useState([\"What's Bitcoin doing?\", \"BTC analysis\", \"Should I buy Bitcoin?\", \"Bitcoin price prediction\", \"Market sentiment\", \"Bitcoin market psychology\"]);\n  useEffect(() => {\n    let timer;\n    const updatePrompts = async () => {\n      const prompts = await systemAPI.getContextualPrompts();\n      if (Array.isArray(prompts) && prompts.length) {\n        setQuickQuestions(prompts);\n      }\n    };\n    updatePrompts();\n    timer = setInterval(updatePrompts, 15 * 60 * 1000);\n    return () => timer && clearInterval(timer);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-white border-b border-gray-700\",\n      style: {\n        backgroundColor: '#0F0F0F'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl mx-auto px-4 py-3 font-bold text-lg flex items-center justify-start gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Coinlink\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this), hasNewAlert && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-block h-2.5 w-2.5 rounded-full bg-red-500 animate-pulse\",\n          title: \"New alert\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto min-h-0\",\n      style: {\n        backgroundColor: '#0F0F0F'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl mx-auto p-4 space-y-3\",\n        children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`,\n          children: message.type === 'user' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-2xl px-4 py-2 rounded-2xl bg-[#252a3a] hover:bg-[#3b4252] text-white transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm whitespace-pre-line\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs opacity-70 mt-1\",\n              children: new Date(message.timestamp).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 17\n          }, this) : message.type === 'agent' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-2xl px-4 py-2 rounded-2xl bg-[#1f2937] border border-[#334155] text-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm whitespace-pre-line\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs opacity-70 mt-1\",\n              children: new Date(message.timestamp).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this) : message.type === 'system' ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-2xl px-4 py-2 rounded-2xl bg-[#2a2a3a] border-l-4 border-l-[#4a5568] text-gray-200 italic\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm whitespace-pre-line\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs opacity-70 mt-1\",\n              children: new Date(message.timestamp).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-2xl\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-200 whitespace-pre-line\",\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 flex space-x-2 text-xs text-gray-300\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  navigator.clipboard.writeText(message.content).catch(() => {});\n                },\n                className: \"px-2 py-1 rounded bg-[#1e1e1e] border border-[#2a2a2a] hover:bg-[#262626] hover:border-[#3a3a3a]\",\n                title: \"Copy\",\n                children: \"Copy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  const text = message.content;\n                  if (navigator.share) {\n                    navigator.share({\n                      title: 'CoinLink Snapshot',\n                      text\n                    }).catch(() => {});\n                  } else {\n                    const url = `mailto:?subject=CoinLink Snapshot&body=${encodeURIComponent(text)}`;\n                    window.location.href = url;\n                  }\n                },\n                className: \"px-2 py-1 rounded bg-[#1e1e1e] border border-[#2a2a2a] hover:bg-[#262626] hover:border-[#3a3a3a]\",\n                title: \"Share\",\n                children: \"Share\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-400 mt-1\",\n              children: new Date(message.timestamp).toLocaleTimeString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 17\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-start\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n              style: {\n                animationDelay: '0.1s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",\n              style: {\n                animationDelay: '0.2s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 py-2 flex-shrink-0\",\n      style: {\n        backgroundColor: '#0F0F0F'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-start gap-2 overflow-x-auto pb-2 scrollbar-thin\",\n          style: {\n            scrollbarColor: '#2A2A2A #121212'\n          },\n          children: quickQuestions.map((question, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => sendMessage(question),\n            disabled: isLoading,\n            className: \"px-3 py-2 rounded-full text-xs whitespace-nowrap flex-shrink-0 text-gray-200 bg-[#1e1e1e] border border-[#2a2a2a] hover:bg-[#262626] hover:border-[#3a3a3a] disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",\n            children: question\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4 py-4 border-t border-gray-700 flex-shrink-0\",\n      style: {\n        backgroundColor: '#0F0F0F'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-3xl mx-auto relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: isPasswordStep ? \"password\" : \"text\" // Toggle input type\n          ,\n          value: inputMessage,\n          onChange: e => setInputMessage(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Ask about Bitcoin or type /register to register your free account\",\n          disabled: isLoading,\n          className: \"w-full pr-14 text-gray-200 placeholder-gray-200 px-5 py-3 rounded-full text-base bg-[#1B1B1B] border border-[#2A2A2A] focus:outline-none focus:border-[#3A3A3A] disabled:opacity-50 shadow-inner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"aria-label\": \"Send\",\n          title: \"Send\",\n          onClick: () => sendMessage(),\n          disabled: !inputMessage.trim() || isLoading,\n          className: `absolute bottom-2 right-2 h-9 w-9 rounded-full flex items-center justify-center transition-all p-0 ${!inputMessage.trim() || isLoading ? 'opacity-60 cursor-not-allowed' : 'cursor-pointer'}`,\n          style: {\n            backgroundColor: '#FFFFFF'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"20\",\n            height: \"20\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 5v14M12 5l-5 5M12 5l5 5\",\n              stroke: \"#000000\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n};\n_s(Chat, \"q7S6CLxUpq7xO0nEqkoQApW42Js=\");\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","bitcoinAPI","systemAPI","alerts$","connectRealtime","jsxDEV","_jsxDEV","Chat","isConnected","_s","messages","setMessages","inputMessage","setInputMessage","isLoading","setIsLoading","sessionId","setSessionId","isPasswordStep","setIsPasswordStep","messagesEndRef","hasNewAlert","setHasNewAlert","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","console","log","id","type","content","timestamp","Date","toISOString","sub","subscribe","alert","text","title","now","time","toLocaleTimeString","hour","minute","prev","Math","random","setTimeout","unsubscribe","sendMessage","message","messageToSend","trim","isPasswordField","some","m","toLowerCase","includes","userMessage","response","chat","system_message","systemMessage","bot_response","botMessage","Error","error","_error$response","_error$response$data","detail","data","errorMessage","handleKeyPress","e","key","shiftKey","preventDefault","quickQuestions","setQuickQuestions","timer","updatePrompts","prompts","getContextualPrompts","Array","isArray","length","setInterval","clearInterval","className","children","style","backgroundColor","fileName","_jsxFileName","lineNumber","columnNumber","map","onClick","navigator","clipboard","writeText","catch","share","url","encodeURIComponent","window","location","href","animationDelay","ref","scrollbarColor","question","index","disabled","value","onChange","target","onKeyPress","placeholder","width","height","viewBox","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","_c","$RefreshReg$"],"sources":["/Users/shayanbozorgmanesh/Documents/Parking/coinlink-mvp/frontend/src/components/Chat.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { bitcoinAPI, systemAPI } from '../services/api';\nimport { alerts$, connectRealtime } from '../services/realtime';\n\nconst Chat = ({ isConnected }) => {\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionId, setSessionId] = useState('default'); // Add this line\n  const [isPasswordStep, setIsPasswordStep] = useState(false); // Add this line\n  const messagesEndRef = useRef(null);\n  const [hasNewAlert, setHasNewAlert] = useState(false);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n    try { console.log('Chat messages updated:', messages); } catch {}\n  }, [messages]);\n\n  // Add welcome message on component mount\n  useEffect(() => {\n    setMessages([\n      {\n        id: 'welcome',\n        type: 'bot',\n        content: 'Welcome to CoinLink Bitcoin Analysis! Ask me anything about Bitcoin (BTC) - price analysis, market sentiment, technical indicators, or trading insights. I focus exclusively on Bitcoin analysis. Type /register to create your free account.',\n        timestamp: new Date().toISOString(),\n        sessionId: sessionId  // Add this line\n      }\n    ]);\n  }, []);\n\n  // Subscribe to agent-initiated alert messages (inline chat)\n  useEffect(() => {\n    connectRealtime();\n    const sub = alerts$.subscribe((alert) => {\n      try {\n        // Expect only agent chat payloads now\n        if (alert && (alert.text || alert.title)) {\n          const now = new Date();\n          const time = now.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n          let text = alert.text || '';\n          if (text) {\n            setMessages(prev => [...prev, { \n              id: Date.now() + Math.random(), \n              type: 'agent', \n              content: text, \n              timestamp: new Date().toISOString(),\n              sessionId: sessionId  // Add this line\n            }]);\n            setHasNewAlert(true);\n            setTimeout(() => setHasNewAlert(false), 4000);\n            // Scroll will auto-run via messages effect\n          }\n        }\n      } catch {}\n    });\n    return () => sub.unsubscribe();\n  }, []);\n\n  \n\n  const sendMessage = async (message = null) => {\n    try {\n      const messageToSend = message || inputMessage;\n      console.log('sendMessage called with:', messageToSend);\n      console.log('isConnected:', isConnected);\n      console.log('inputMessage:', inputMessage);\n      \n      if (!messageToSend || !messageToSend.trim()) {\n        console.log('Message is empty, returning');\n        return;\n      }\n      \n      // Remove the isConnected check to allow chat to work without WebSocket\n      // if (!isConnected) {\n      //   console.log('Not connected, returning');\n      //   return;\n      // }\n\n      const isPasswordField = messages.some(m => \n        m.type === 'system' && m.content.toLowerCase().includes('password')\n      );\n\n      const userMessage = {\n        id: Date.now(),\n        type: 'user',\n        content: isPasswordField ? '••••••••' : messageToSend, // Mask password display\n        timestamp: new Date().toISOString(),\n        sessionId: sessionId  // Add this line\n      };\n\n      console.log('Adding user message:', userMessage);\n      setMessages(prev => [...prev, userMessage]);\n      if (!message) setInputMessage('');\n      setIsLoading(true);\n\n      try {\n        console.log('Calling bitcoinAPI.chat with:', messageToSend);\n        const response = await bitcoinAPI.chat(messageToSend, sessionId);\n        console.log('Chat API response:', response);\n\n        if (response && response.type === 'registration') {\n          setIsPasswordStep(response.system_message.content.toLowerCase().includes('password'));\n          // Handle registration flow\n          const systemMessage = {\n            id: Date.now() + 1,\n            type: 'system',\n            content: response.system_message.content,\n            timestamp: new Date().toISOString(),\n            sessionId: sessionId  // Add this line\n          };\n          setMessages(prev => [...prev, systemMessage]);\n        } else if (response && response.type === 'chat' && response.bot_response) {\n          // Handle normal chat\n          setIsPasswordStep(false);\n          const botMessage = {\n            id: Date.now() + 1,\n            type: 'bot',\n            content: response.bot_response,\n            timestamp: new Date().toISOString(),\n            sessionId: sessionId  // Add this line\n          };\n\n          console.log('Adding bot message:', botMessage);\n          setMessages(prev => [...prev, botMessage]);\n        } else {\n          throw new Error('Invalid response format from chat API');\n        }\n      } catch (error) {\n        console.error('Error sending message:', error);\n        const detail = (error && (error.response?.data?.detail || error.message)) || 'Unknown error';\n        const errorMessage = {\n          id: Date.now() + 1,\n          type: 'bot',\n          content: `Error: ${detail}`,\n          timestamp: new Date().toISOString(),\n          sessionId: sessionId  // Add this line\n        };\n        setMessages(prev => [...prev, errorMessage]);\n      } finally {\n        setIsLoading(false);\n      }\n    } catch (error) {\n      console.error('Unexpected error in sendMessage:', error);\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const [quickQuestions, setQuickQuestions] = useState([\n    \"What's Bitcoin doing?\",\n    \"BTC analysis\",\n    \"Should I buy Bitcoin?\",\n    \"Bitcoin price prediction\",\n    \"Market sentiment\",\n    \"Bitcoin market psychology\"\n  ]);\n\n  useEffect(() => {\n    let timer;\n    const updatePrompts = async () => {\n      const prompts = await systemAPI.getContextualPrompts();\n      if (Array.isArray(prompts) && prompts.length) {\n        setQuickQuestions(prompts);\n      }\n    };\n    updatePrompts();\n    timer = setInterval(updatePrompts, 15 * 60 * 1000);\n    return () => timer && clearInterval(timer);\n  }, []);\n\n  return (\n    <div className=\"flex flex-col h-full overflow-hidden\">\n      {/* Header */}\n      <div className=\"text-white border-b border-gray-700\" style={{ backgroundColor: '#0F0F0F' }}>\n        <div className=\"max-w-3xl mx-auto px-4 py-3 font-bold text-lg flex items-center justify-start gap-2\">\n          <span>Coinlink</span>\n          {hasNewAlert && (\n            <span className=\"inline-block h-2.5 w-2.5 rounded-full bg-red-500 animate-pulse\" title=\"New alert\" />\n          )}\n        </div>\n      </div>\n\n\n      {/* Messages Area */}\n      <div className=\"flex-1 overflow-y-auto min-h-0\" style={{ backgroundColor: '#0F0F0F' }}>\n        <div className=\"max-w-3xl mx-auto p-4 space-y-3\">\n          {messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n            >\n              {message.type === 'user' ? (\n                <div className=\"max-w-2xl px-4 py-2 rounded-2xl bg-[#252a3a] hover:bg-[#3b4252] text-white transition-colors\">\n                  <p className=\"text-sm whitespace-pre-line\">{message.content}</p>\n                  <p className=\"text-xs opacity-70 mt-1\">\n                    {new Date(message.timestamp).toLocaleTimeString()}\n                  </p>\n                </div>\n              ) : message.type === 'agent' ? (\n                <div className=\"max-w-2xl px-4 py-2 rounded-2xl bg-[#1f2937] border border-[#334155] text-gray-100\">\n                  <p className=\"text-sm whitespace-pre-line\">{message.content}</p>\n                  <p className=\"text-xs opacity-70 mt-1\">{new Date(message.timestamp).toLocaleTimeString()}</p>\n                </div>\n              ) : message.type === 'system' ? (\n                <div className=\"max-w-2xl px-4 py-2 rounded-2xl bg-[#2a2a3a] border-l-4 border-l-[#4a5568] text-gray-200 italic\">\n                  <p className=\"text-sm whitespace-pre-line\">{message.content}</p>\n                  <p className=\"text-xs opacity-70 mt-1\">{new Date(message.timestamp).toLocaleTimeString()}</p>\n                </div>\n              ) : (\n                <div className=\"max-w-2xl\">\n                  <p className=\"text-sm text-gray-200 whitespace-pre-line\">{message.content}</p>\n                  <div className=\"mt-2 flex space-x-2 text-xs text-gray-300\">\n                    <button\n                      onClick={() => { navigator.clipboard.writeText(message.content).catch(() => {}); }}\n                      className=\"px-2 py-1 rounded bg-[#1e1e1e] border border-[#2a2a2a] hover:bg-[#262626] hover:border-[#3a3a3a]\"\n                      title=\"Copy\"\n                    >\n                      Copy\n                    </button>\n                    <button\n                      onClick={() => {\n                        const text = message.content;\n                        if (navigator.share) {\n                          navigator.share({ title: 'CoinLink Snapshot', text }).catch(() => {});\n                        } else {\n                          const url = `mailto:?subject=CoinLink Snapshot&body=${encodeURIComponent(text)}`;\n                          window.location.href = url;\n                        }\n                      }}\n                      className=\"px-2 py-1 rounded bg-[#1e1e1e] border border-[#2a2a2a] hover:bg-[#262626] hover:border-[#3a3a3a]\"\n                      title=\"Share\"\n                    >\n                      Share\n                    </button>\n                  </div>\n                  <p className=\"text-xs text-gray-400 mt-1\">\n                    {new Date(message.timestamp).toLocaleTimeString()}\n                  </p>\n                </div>\n              )}\n            </div>\n          ))}\n          {isLoading && (\n            <div className=\"flex justify-start\">\n              <div className=\"flex space-x-1\">\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n              </div>\n            </div>\n          )}\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n\n      {/* Pre-configured Prompts - Above chat input, styled like dark pills */}\n      <div className=\"px-4 py-2 flex-shrink-0\" style={{ backgroundColor: '#0F0F0F' }}>\n        <div className=\"max-w-3xl mx-auto\">\n          <div className=\"flex justify-start gap-2 overflow-x-auto pb-2 scrollbar-thin\" style={{ scrollbarColor: '#2A2A2A #121212' }}>\n            {quickQuestions.map((question, index) => (\n              <button\n                key={index}\n                onClick={() => sendMessage(question)}\n                disabled={isLoading}\n                className=\"px-3 py-2 rounded-full text-xs whitespace-nowrap flex-shrink-0 text-gray-200 bg-[#1e1e1e] border border-[#2a2a2a] hover:bg-[#262626] hover:border-[#3a3a3a] disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                {question}\n              </button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Chat Input - dark rounded field with Cursor-style send icon */}\n      <div className=\"px-4 py-4 border-t border-gray-700 flex-shrink-0\" style={{ backgroundColor: '#0F0F0F' }}>\n        <div className=\"max-w-3xl mx-auto relative\">\n          <input\n            type={isPasswordStep ? \"password\" : \"text\"} // Toggle input type\n            value={inputMessage}\n            onChange={(e) => setInputMessage(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"Ask about Bitcoin or type /register to register your free account\"\n            disabled={isLoading}\n            className=\"w-full pr-14 text-gray-200 placeholder-gray-200 px-5 py-3 rounded-full text-base bg-[#1B1B1B] border border-[#2A2A2A] focus:outline-none focus:border-[#3A3A3A] disabled:opacity-50 shadow-inner\"\n          />\n          <button\n            type=\"button\"\n            aria-label=\"Send\"\n            title=\"Send\"\n            onClick={() => sendMessage()}\n            disabled={!inputMessage.trim() || isLoading}\n            className={`absolute bottom-2 right-2 h-9 w-9 rounded-full flex items-center justify-center transition-all p-0 ${(!inputMessage.trim() || isLoading) ? 'opacity-60 cursor-not-allowed' : 'cursor-pointer'}`}\n            style={{ backgroundColor: '#FFFFFF' }}\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M12 5v14M12 5l-5 5M12 5l5 5\" stroke=\"#000000\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}